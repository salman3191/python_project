{% extends "base.html" %} {% block title %}Departments{% endblock %} {% block
content %}

<h2 class="mb-4 ms-2">{{ batch.course_name }} - {{ batch.year }} Students</h2>
<!-- ðŸ” Search box with Edit/Delete buttons -->
<form
  method="get"
  action="{{ url_for('batch_students', id=batch.id) }}"
  class="d-flex justify-content-between align-items-center mb-3 ms-2 me-2"
>
  <!-- Search box -->
  <input
    type="text"
    name="search"
    class="form-control w-50"
    placeholder="Search by name, enrollment, or registration..."
    value="{{ search_query }}"
  />

  <!-- Edit/Delete buttons (only show if a student was found) -->
  {% if selected_student %}
  <div class="ms-3 d-flex gap-2">
    <a
      href="{{ url_for('edit_student', id=selected_student.id) }}"
      class="btn btn-sm btn-primary"
      >Edit</a
    >
    <a
      href="{{ url_for('delete_student', id=selected_student.id, batch_id=batch.id) }}"
      class="btn btn-sm btn-danger"
      onclick="return confirm('Are you sure you want to delete this student?');"
      >Delete</a
    >
  </div>
  {% endif %}
</form>
{% if no_data %}
<div class="alert alert-warning ms-2" role="alert">
  No students found for this batch.
</div>
{% else %}
<table class="table table-bordered ms-2">
  <thead>
    <tr>
      <th>Enrollment No.</th>
      <th>Registration No.</th>
      <th>Name</th>
      <th>Parentage</th>
      <th>DOB</th>
      <th>Category</th>
      <th>Gender</th>
    </tr>
  </thead>
  <tbody>
    {% for student in students %}
    <tr>
      <td>{{ student.enrollment_no }}</td>
      <td>{{ student.registration_no }}</td>
      <td>{{ student.name }}</td>
      <td>{{ student.parentage }}</td>
      <td>{{ student.dob }}</td>
      <td>{{ student.category }}</td>
      <td>{{ student.gender }}</td>

      <!-- <td>
        <a
          href="{{ url_for('edit_student', id=student.id) }}"
          class="btn btn-sm btn-primary"
          >Edit</a
        >
        <a
          href="{{ url_for('delete_student', id=student['id'], batch_id=batch['id']) }}"
          class="btn btn-sm btn-danger"
          onclick="return confirm('Are you sure you want to delete this student?');"
        >
          Delete
        </a>
      </td> -->
    </tr>
    {% endfor %}
  </tbody>
</table>
<form
  action="{{ url_for('gender_ratio_chart', batch_id=batch['id']) }}"
  method="get"
  class="ms-2 mb-3"
>
  <button type="submit" class="btn btn-info">Show Gender Ratio</button>
</form>
{% endif %} {% endblock %}
